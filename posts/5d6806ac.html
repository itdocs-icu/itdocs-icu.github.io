<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

    
      <link rel="icon" href="/favicon.png" />
    

    <title>
        
          Hive参数优化 - Docs`Blog
        
    </title>

    <!-- Spectre.css framework -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre-exp.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre-icons.min.css">

    <!-- theme css & js -->
    
<link rel="stylesheet" href="/css/book.css">

    
<link rel="stylesheet" href="/css/mdicon.css">

    
<script src="/js/book.js"></script>

    
<script src="/js/jquery.min.js"></script>

<!--   之前的code复制按钮  
<script src="/js/clipboard.min.js"></script>
-->
<!--    code-->
    
<link rel="stylesheet" href="/css/prism.css">

    
<script src="/js/prism.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async></script>


    
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>

    
<script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>

    <!-- tocbot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">


    <!-- katex -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">

    
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'G-3FTL9QWCS6', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/zooming/2.1.1/zooming.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const zooming = new Zooming()
    zooming.listen('.book-content img')
})
</script>


<meta name="generator" content="Hexo 5.4.0"></head>


<body>

<div class="book-container">
  <div class="book-sidebar">
    <div class="book-brand">
  <a href="/">
    <img src="/favicon.png">
    <span>DOCS`BLOG</span>
  </a>
</div>
    <div class="tree" id="tree">
    <input id="search-input" class="search-input" type="text" placeholder="search...">
    

    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Linux
                </a>
                
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Centos
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/f593e9b1.html">
                    如何正确的升级node版本
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/989ce8de.html">
                    安装GitLabCE
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/989ce8de.html">
                    安装gitla社区版
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/4ce19a20.html">
                    vim如何复制到系统剪切板
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/4ce19a20.html">
                    如何将Vim剪贴板里面的东西粘贴到Vim之外的地方
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/c2bdb00f.html">
                    nvm安装和使用
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/c8f03141.html">
                    不得不收藏的日常命令
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/ef074418.html">
                    Screen使用
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/1c16840d.html">
                    查看Linux端口占用
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/1c16840d.html">
                    查看Linux端口占用并Kill掉
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/5201ae1d.html">
                    Linux过滤文件中无用的内容
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/b2d2ad38.html">
                    Linux批量更改文件后缀名
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/b2579617.html">
                    SocketTimeout完美解决方案
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/4d7b3137.html">
                    如何在服务器查看公网ip
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/6d271f4a.html">
                    Node安装指定版本
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/8f994908.html">
                    SFTP使用方法
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/8f994908.html">
                    sftp常用命令使用
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/d43cebaa.html">
                    卸载删除windows服务
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/d43cebaa.html">
                    怎么卸载windows服务
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/7ea9f75b.html">
                    网站打开testing
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/ddac911d.html">
                    Centos网卡异常解决方案
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Docker
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/cacc85bf.html">
                    Docker安装Mysql
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/e1edea63.html">
                    Docker服务重启
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/e1edea63.html">
                    docker服务重启
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/ad5641b0.html">
                    Docker常用命令总结与介绍
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/ad5641b0.html">
                    Docker快速使用
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/8224ad28.html">
                    DockerCompose使用
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/21ba7853.html">
                    安装DockerCompose
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/3328c18c.html">
                    Docker查看容器IP
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/8185c0b3.html">
                    Docker删除镜像
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/ff40acb.html">
                    Docker打包镜像
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/eeae9da3.html">
                    DockerCP命令拷贝文件
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/dd0ea551.html">
                    Docker中安装vim
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/6b788e8e.html">
                    为什么使用Docker
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/ed05a2e1.html">
                    MacOS安装Docker
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    DataBase
                </a>
                
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Mysql
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/cacc85bf.html">
                    Docker安装Mysql
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/6c7ba768.html">
                    mysql版本导致登录失败
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/a958f1c0.html">
                    mysql开启binlog
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/227d5864.html">
                    mysql不同版本密码修改
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/94a8894b.html">
                    yum安装mysql
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/3c10e2ca.html">
                    Navicat链接Mysql
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Tools
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/dbc6f637.html">
                    sublime激活
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Obsidian
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/d6428e0c.html">
                    Obs中配置图床
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Mac
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/a3ab6ab7.html">
                    SublimeText快捷键
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/99c9d018.html">
                    mac下iterm2终端安装rzsz命令方法
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/7a9c72b2.html">
                    Mac安装Mysql
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/87c4f94b.html">
                    alias
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Server
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/7a9c72b2.html">
                    Mac安装Mysql
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/b2579617.html">
                    SocketTimeout完美解决方案
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/6d271f4a.html">
                    Node安装指定版本
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/8f994908.html">
                    SFTP使用方法
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/d43cebaa.html">
                    卸载删除windows服务
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/73299399.html">
                    JumpServer
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Vmware
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/ddac911d.html">
                    Centos网卡异常解决方案
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Python
                </a>
                
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    pip
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/74924737.html">
                    Python获得24小时List的方法
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/4a2d1ba8.html">
                    pip源管理
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/c8168d18.html">
                    正则截取特定字符中间字符
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/86d8d5ed.html">
                    xml_str转json
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/a55ee731.html">
                    Python一键安装全部依赖包
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/55026eee.html">
                    Python的Str和dict互转
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/8cb92695.html">
                    批量修改文件名
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    FastApi
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/b3de806d.html">
                    如何动态更新配置文件
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Tips
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/b3de806d.html">
                    Python使用信号量动态更新配置文件
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/a55ee731.html">
                    Python一键安装全部依赖包
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/55026eee.html">
                    Python的Str和dict互转
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/8cb92695.html">
                    批量修改文件名
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Tensorflow
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/48120bab.html">
                    Tensorflow联邦学习平台搭建
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Blog
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/177b0cf5.html">
                    mkdocs使用material主题美化
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/177b0cf5.html">
                    mkdocs换主题
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/b553abaf.html">
                    MkDocs文档工具使用
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/b553abaf.html">
                    mkdocs静态博客
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/db1fa1a3.html">
                    CoidMD在线协作MD编辑器
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/db1fa1a3.html">
                    使用docker安装codimd
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/a56fd7be.html">
                    mkdocs搭建使用
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/6374189d.html">
                    MarkDown
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/90501bcc.html">
                    Hexo站点
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Other
                </a>
                
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Web
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/3749a5d6.html">
                    搭建第一个Vite项目
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/ba702d25.html">
                    vue-cli脚手架
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/7ea9f75b.html">
                    网站打开testing
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Feel
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/f41c51aa.html">
                    工作方式
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Apache
                </a>
                
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Hive
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/dad0c3fc.html">
                    认识Hive
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/1a42f8cf.html">
                    Hive分桶表
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/51c86388.html">
                    HiveQL函数-09
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file active">
                <a href="/posts/5d6806ac.html">
                    Hive参数优化
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/787960b2.html">
                    Hive元数据
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/ffffb2e9.html">
                    HiveQL索引
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/70c09e22.html">
                    HiveQL视图
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/f0391331.html">
                    HiveQL数据查询-04
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/e0c0edfd.html">
                    HiveQL数据操作-03
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/fb9aadad.html">
                    HiveQL数据定义-02
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/18bfcb46.html">
                    Hive的简介-01
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/bbae3177.html">
                    Hive修复分区
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Hadoop
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/1e0caca5.html">
                    Hadoop的基本操作
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/f23f9ebb.html">
                    Cloudera登录使用
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/30eb9bf9.html">
                    Cloudera平台搭建使用
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/3762b1a0.html">
                    Amabri权限问题
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/cfccefb1.html">
                    Ambari搭建集群
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    商业化
                </a>
                
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    广告
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/8ae47aa6.html">
                    广告全链路
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/fca0e48c.html">
                    互联网的半壁江山
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/b4bce7a2.html">
                    互联网广告专业术语
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Git
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/aed9e9a.html">
                    Git克隆失败(-54)
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/27f6bca1.html">
                    Git代码提交规范
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
        <ul>
            <li class="file">
                <a href="/posts/3eb6a5c9.html">
                    Gitlab
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    Java
                </a>
                
        <ul>
            <li class="directory">
                <a class="directory">
                    <i class="material-icons">keyboard_arrow_right</i>
                    JavaSE
                </a>
                
        <ul>
            <li class="file">
                <a href="/posts/17415.html">
                    01、Java环境
                </a>
            </li>
            <div class="article-toc" style="display: none;"></div>
        </ul>
    
            </li>

        </ul>
    
            </li>

        </ul>
    
</div>



<script src="/js/book-menu.js"></script>


  </div>

  <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
  <div class="sidebar-toggle-inner"></div>
</div>

<script>
function add_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.add('show')
}

function remove_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.remove('show')
}

function sidebar_toggle() {
    let sidebar_toggle = document.querySelector('.sidebar-toggle')
    let sidebar = document.querySelector('.book-sidebar')
    let content = document.querySelector('.off-canvas-content')
    if (sidebar_toggle.classList.contains('extend')) { // show
        sidebar_toggle.classList.remove('extend')
        sidebar.classList.remove('hide')
        content.classList.remove('extend')
    }
    else { // hide
        sidebar_toggle.classList.add('extend')
        sidebar.classList.add('hide')
        content.classList.add('extend')
    }
}
</script>


  <div class="off-canvas-content">
    <div class="columns">
      <div class="column col-10 col-lg-12">
        <div class="book-navbar">
          <!-- For Responsive Layout -->

<header class="navbar">
  <section class="navbar-section">
    <a onclick="open_sidebar()">
      <i class="icon icon-menu"></i>
    </a>
  </section>
</header>

        </div>
        <div class="book-content">
          <div class="book-post">
  <h2 id="本地模式-小任务">本地模式(小任务)</h2>
<p><code>需要满足以下条件</code></p>
<ol>
<li>job的输入数据大小必须小于参数</li>
</ol>
   <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hive.exec.mode.local.auto.inputbytes.max<span class="token punctuation">(</span>默认128MB<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ol start="2">
<li>job的map数必须小于参数</li>
</ol>
   <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hive.exec.mode.local.auto.tasks.max<span class="token punctuation">(</span>默认4<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ol start="3">
<li>job的reduce数必须为0或者1</li>
</ol>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hive.exec.mode.local.auto.inputbytes.max<span class="token operator">=</span><span class="token number">134217728</span>
hive.exec.mode.local.auto.tasks.max<span class="token operator">=</span><span class="token number">4</span>
hive.exec.mode.local.auto<span class="token operator">=</span>true
hive.mapred.local.mem：本地模式启动的JVM内存大小<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="并发执行">并发执行</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hive.exec.parallel<span class="token operator">=</span>true ，默认为false
hive.exec.parallel.thread.number<span class="token operator">=</span><span class="token number">8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="Strict-Mode">Strict Mode</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hive.mapred.mode<span class="token operator">=</span>true<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>严格模式不允许执行以下查询：</p>
<ul>
<li>分区表上没有指定了分区</li>
<li>没有limit限制的order by语句</li>
<li>笛卡尔积：JOIN时没有ON语句</li>
</ul>
<h2 id="动态分区">动态分区</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hive.exec.dynamic.partition.mode<span class="token operator">=</span>strict：该模式下必须指定一个静态分区
hive.exec.max.dynamic.partitions<span class="token operator">=</span><span class="token number">1000</span>
hive.exec.max.dynamic.partitions.pernode<span class="token operator">=</span><span class="token number">100</span>：在每一个mapper/reducer节点允许创建的最大分区数
DATANODE：dfs.datanode.max.xceivers<span class="token operator">=</span><span class="token number">8192</span>：允许DATANODE打开多少个文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="推测执行">推测执行</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">map red.map.tasks.speculative.execution<span class="token operator">=</span>true
mapred.reduce.tasks.speculative.execution<span class="token operator">=</span>true
hive.mapred.reduce.tasks.speculative.execution<span class="token operator">=</span>true<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="Single-MapReduce-MultiGROUP-BY">Single MapReduce MultiGROUP BY</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hive.multigroupby.singlemar<span class="token operator">=</span>true：当多个GROUP BY语句有相同的分组列，则会优化为一个MR任务<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="是否提供虚拟列">是否提供虚拟列</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hive.exec.rowoffset<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="分组">分组</h2>
<p>两个聚集函数不能有不同的DISTINCT列，以下表达式是错误的：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">INSERT OVERWRITE TABLE pv_gender_agg SELECT pv_users.gender, count<span class="token punctuation">(</span>DISTINCT pv_users.userid<span class="token punctuation">)</span>, count<span class="token punctuation">(</span>DISTINCT pv_users.ip<span class="token punctuation">)</span> FROM pv_users GROUP BY pv_users.gender<span class="token punctuation">;</span>
SELECT语句中只能有GROUP BY的列或者聚集函数。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="Map端部分聚合">Map端部分聚合</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hive.map.aggr<span class="token operator">=</span>true<span class="token punctuation">;</span>在map中会做部分聚集操作，效率更高但需要更多的内存。 

hive.groupby.mapaggr.checkinterval：在Map端进行聚合操作的条目数目。 

hive.groupby.skewindata<span class="token operator">=</span>true：数据倾斜时负载均衡，当选项设定为true，生成的查询计划会有两个MRJob。第一个MRJob 中，

Map的输出结果集合会随机分布到Reduce中，每个Reduce做部分聚合操作，并输出结果，这样处理的结果是相同的GroupBy Key

有可能被分发到不同的Reduce中，从而达到负载均衡的目的；第二个MRJob再根据预处理的数据结果按照GroupBy Key分布到
Reduce中（这个过程可以保证相同的GroupBy Key被分布到同一个Reduce中），最后完成最终的聚合操作。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Multi-Group-By-Inserts">Multi- Group-By Inserts</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">FROM <span class="token builtin class-name">test</span>
INSERT OVERWRITE TABLE count1
SELECT count<span class="token punctuation">(</span>DISTINCT test.dqcode<span class="token punctuation">)</span>
GROUP BY test.zipcode
INSERT OVERWRITE TABLE count2
SELECT count<span class="token punctuation">(</span>DISTINCT test.dqcode<span class="token punctuation">)</span>
GROUP BY test.sfcode<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="排序">排序</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ORDER BY colName ASC/DESC
 hive.mapred.mode<span class="token operator">=</span>strict时需要跟limit子句
 hive.mapred.mode<span class="token operator">=</span>nonstrict时使用单个reduce完成排序
 SORT BY colName ASC/DESC ：每个reduce内排序
 DISTRIBUTE BY<span class="token punctuation">(</span>子查询情况下使用 <span class="token punctuation">)</span>：控制特定行应该到哪个reducer，并不保证reduce内数据的顺序
 CLUSTER BY ：当SORT BY 、DISTRIBUTE BY使用相同的列时。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="合并小文件">合并小文件</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hive.merg.mapfiles<span class="token operator">=</span>true：合并map输出
hive.merge.mapredfiles<span class="token operator">=</span>false：合并reduce输出
hive.merge.size.per.task<span class="token operator">=</span><span class="token number">256</span>*1000*1000：合并文件的大小
hive.mergejob.maponly<span class="token operator">=</span>true：如果支持CombineHiveInputFormat则生成只有Map的任务执行merge
hive.merge.smallfiles.avgsize<span class="token operator">=</span><span class="token number">16000000</span>：文件的平均大小小于该值时，会启动一个MR任务执行merge。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Map-reduce数目">Map/reduce数目</h2>
<p>减少map数目：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">set</span> mapred.max.split.size<span class="token operator">=</span><span class="token number">512000000</span><span class="token punctuation">;</span>
<span class="token builtin class-name">set</span> mapred.min.split.size.per.node<span class="token operator">=</span><span class="token number">512000000</span><span class="token punctuation">;</span>
<span class="token builtin class-name">set</span> mapred.min.split.size.per.rack<span class="token operator">=</span><span class="token number">512000000</span><span class="token punctuation">;</span>
<span class="token builtin class-name">set</span> hive.input.format<span class="token operator">=</span>org.apache.hadoop.hive.ql.io.CombineHiveInputFormat<span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="增加map数目：">增加map数目：</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">当input的文件都很大，任务逻辑复杂，map执行非常慢的时候，可以考虑增加Map数，来使得每个map处理的数据量减少，从而提高任务的执行效率。<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>假设有这样一个任务：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> data_desc<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> id<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">case</span> <span class="token keyword">when</span> …<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>…<span class="token punctuation">)</span> <span class="token keyword">from</span> a <span class="token keyword">group</span> <span class="token keyword">by</span> data_desc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果表a只有一个文件，大小为120M，但包含几千万的记录，如果用1个map去完成这个任务，肯定是比较耗时的，这种情况下，我们要考虑将这一个文件合理的拆分成多个，这样就可以用多个map任务去完成。</p>
 <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">set</span> mapred<span class="token punctuation">.</span>reduce<span class="token punctuation">.</span>tasks<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> a_1 <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> a distribute <span class="token keyword">by</span> rand<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这样会将a表的记录，随机的分散到包含10个文件的a_1表中，再用a_1代替上面sql中的a表，则会用10个map任务去完成。每个map任务处理大于12M（几百万记录）的数据，效率肯定会好很多。</p>
<p><code>reduce数目设置：</code></p>
<ul>
<li>参数1：hive.exec.reducers.bytes.per.reducer=1G：每个reduce任务处理的数据量</li>
<li>参数2：hive.exec.reducers.max=999(0.95*TaskTracker数)：每个任务最大的reduce数目<br>
reducer数=min(参数2,总输入数据量/参数1)</li>
</ul>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">set</span> mapred<span class="token punctuation">.</span>reduce<span class="token punctuation">.</span>tasks：每个任务默认的reduce数目。
典型为<span class="token number">0.99</span><span class="token operator">*</span>reduce槽数，hive将其设置为<span class="token operator">-</span><span class="token number">1</span>，自动确定reduce数目。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="常用优化方向">常用优化方向</h2>
<blockquote>
<p>1、好的模型设计事半功倍。</p>
<p>2、解决数据倾斜问题。</p>
<p>3、减少job数。</p>
<p>4、设置合理的map reduce的task数，能有效提升性能。(比如，10w+级别的计算，用160个reduce，那是相当的浪费，1个足够)。</p>
<p>5、了解数据分布，自己动手解决数据倾斜问题是个不错的选择。</p>
<p>6、数据量较大的情况下，慎用count(distinct)，count(distinct)容易产生倾斜问题。</p>
<p>7、对小文件进行合并，是行至有效的提高调度效率的方法，</p>
<p>8、优化时把握整体，单个作业最优不如整体最优。</p>
</blockquote>

</div>

<!--上一篇 下一篇-->


  <div class="paginator">
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
         <!-- 先找到与当前文字相同的目录 -->
        
        
          
          
        
          
          
        
          
          
        
          
           <!-- 在找到当前文章所在的 index -->
          
          
            
            


            

          
            
            


            

          
            
            


             <!-- 下一篇文章 -->
            <div class="next">
<!--              <span>下一章</span>-->
              <span class="material-icons left"> ⇦ </span>

              <a href="/posts/51c86388.html"> HiveQL函数</a>
            </div>
            

          
            
            


            

          
            
              <!-- 上一篇文章 -->
            <div class="prev">
<!--              <span>上一章</span>-->
              <a href="/posts/787960b2.html"> Hive元数据</a>
              <span class="material-icons right"> ⇨ </span>
            </div>
            


            

          
            
            


            

          
            
            


            

          
            
            


            

          
            
            


            

          
            
            


            

          
            
            


            

          
            
            


            

          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  </div>




  <div class="book-comments">
    


    <script src="https://giscus.app/client.js"
            data-repo="A2Data/itdocs_giscus"
            data-repo-id="R_kgDOHPLRRw"
            data-category="Announcements"
            data-category-id="DIC_kwDOHPLRR84COyJ5"
            data-mapping="pathname"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="top"
            data-theme="light"
            data-lang="zh-CN"
            data-loading="lazy"
            crossorigin="anonymous"
            async>
    </script>






  </div>



<script src="/js/book-post.js"></script>



<div class="book-footer">
  <div class="pure">
    <script src="https://pv.sohu.com/cityjson?ie=utf-8"></script>
    <script>
      var getOSAndBrowser = function () {
        var os = navigator.platform;
        var userAgent = navigator.userAgent;
        var info = "";
        var tempArray = "";
        if (os.indexOf("Win") > -1) {
          if (userAgent.indexOf("Windows NT 5.0") > -1) {
            info += "Win2000"
          } else if (userAgent.indexOf("Windows NT 5.1") > -1) {
            info += "WinXP"
          } else if (userAgent.indexOf("Windows NT 5.2") > -1) {
            info += "Win2003"
          }
          else if (userAgent.indexOf("Windows NT 6.0") > -1) {
            info += "WindowsVista"
          } else if (userAgent.indexOf("Windows NT 6.1") > -1 || userAgent.indexOf("Windows 7") > -1) {
            info += "Win7"
          } else if (userAgent.indexOf("Windows NT 6.2") > -1 || userAgent.indexOf("Windows 8") > -1) {
            info += "Win8"
          }
          else if (userAgent.indexOf("Windows NT 6.3") > -1 || userAgent.indexOf("Windows 8.1") > -1) {
            info += "Win8.1"
          } else if (userAgent.indexOf("Windows NT 10.0") > -1 || userAgent.indexOf("Windows 10") > -1) {
            info += "Win10"
          } else {
            info += "Other"
          }
        } else if (os.indexOf("Mac") > -1) {
          info += "Mac"
        } else if (os.indexOf("X11") > -1) {
          info += "Unix"
        } else if (os.indexOf("Linux") > -1) {
          info += "Linux"
        } else { info += "Other" } info += "/";
        var isOpera = userAgent.indexOf("Opera") > -1;
        var isIE = userAgent.indexOf("compatible") > -1 && userAgent.indexOf("MSIE") > -1 && !isOpera;
        var isEdge = userAgent.toLowerCase().indexOf("edge") > -1 && !isIE;
        var isIE11 = (userAgent.toLowerCase().indexOf("trident") > -1 && userAgent.indexOf("rv") > -1);
        if (/[Ff]irefox(\/\d+\.\d+)/.test(userAgent)) {
          tempArray = /([Ff]irefox)\/(\d+\.\d+)/.exec(userAgent);
          info += tempArray[1] + tempArray[2]
        } else if (isIE) {
          var version = "";
          var reIE = new RegExp("MSIE (\\d+\\.\\d+);");
          reIE.test(userAgent);
          var fIEVersion = parseFloat(RegExp["$1"]);
          if (fIEVersion == 7) {
            version = "IE7"
          } else if (fIEVersion == 8) {
            version = "IE8"
          } else if (fIEVersion == 9) { version = "IE9" } else if (fIEVersion == 10) { version = "IE10" } else { version = "0" } info += version
        } else if (isEdge) { info += "Edge" } else if (isIE11) { info += "IE11" } else if (/[Cc]hrome\/\d+/.test(userAgent)) { tempArray = /([Cc]hrome)\/(\d+)/.exec(userAgent); info += tempArray[1] + tempArray[2] } else if (/[Vv]ersion\/\d+\.\d+\.\d+(\.\d)* *[Ss]afari/.test(userAgent)) { tempArray = /[Vv]ersion\/(\d+\.\d+\.\d+)(\.\d)* *([Ss]afari)/.exec(userAgent); info += tempArray[3] + tempArray[1] } else if (/[Oo]pera.+[Vv]ersion\/\d+\.\d+/.test(userAgent)) { tempArray = /([Oo]pera).+[Vv]ersion\/(\d+)\.\d+/.exec(userAgent); info += tempArray[1] + tempArray[2] } else { info += "unknown" } return info
      };
      document.write("欢迎来自" + returnCitySN["cname"] + "的朋友");
      document.write(" <br> 您的 IP 是:" + returnCitySN["cip"]);
      document.write(",您使用的是:" + getOSAndBrowser());
    </script>
  </div>
  <div>
    <span id="timeDate"></span>
    <i class="fa fa-heartbeat" aria-hidden="true" style="color:rgba(255,0,0,.9)" ></i>
    <span id="times"></span>
    <i class="fa fa-heartbeat" aria-hidden="true" style="color:rgba(255,0,0,.9)" ></i>
    <script>
      var now = new Date();
      function createtime() {
        var grt= new Date("07/21/2021 00:00:00");  //在此处修改你的建站时间，格式：月/日/年 时:分:秒
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        // document.getElementById("timeDate").innerHTML = "本站已运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = "本站已运行 "+dnum+" 天 "+ hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
      }
      setInterval("createtime()",250);
    </script>

  </div>
  <div class="github-badge">
    <a style="color: #fff" rel="license" href="https://www.a2data.cn/" target="_blank" title="DataScience提供内容创作">
      <span class="badge-subject">Copyright©2021</span><span class="badge-value bg-blueviolet">DataBricks</span></a>
  </div>
  <div class="github-badge">
    <a style="color: #fff" rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="本站点采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可">
      <span class="badge-subject"><i class="fa fa-copyright"></i></span><span class="badge-value bg-lightgrey">BY-NC-SA 4.0</span></a>
  </div>
  <div class="github-badge">
    <a style="color: #fff" rel="license" href="https://beian.miit.gov.cn/" target="_blank" title="[互联网文档]">
      <span class="badge-subject">京ICP</span><span class="badge-value bg-red">备20010978号-3</span></a>
  </div>
</div>

<script>
  function listennSidebarTOC() {
    const navItems = document.querySelectorAll(".toc li");
    if (!navItems.length) return;
    const sections = [...navItems].map((element) => {
      const link = element.querySelector(".toc-link");
      const target = document.getElementById(
              decodeURI(link.getAttribute("href")).replace("#", "")
      );
      link.addEventListener("click", (event) => {
        event.preventDefault();
        window.scrollTo({
          top: target.offsetTop,
          behavior: "smooth"
        });
      });
      return target;
    });

    function activateNavByIndex(target) {
      if (target.classList.contains("active-current")) return;

      document.querySelectorAll(".toc .active").forEach((element) => {
        element.classList.remove("active", "active-current");
      });
      target.classList.add("active", "active-current");
      $('.toc-link').removeClass('active_b');
      let parent = target.parentNode;
      while (!parent.matches(".toc")) {
        if (parent.matches("li")) parent.classList.add("active");
        parent = parent.parentNode;
      }
    }

    function findIndex(entries) {
      let index = 0;
      let entry = entries[index];
      if (entry.boundingClientRect.top > 0) {
        index = sections.indexOf(entry.target);
        return index === 0 ? 0 : index - 1;
      }
      for (; index < entries.length; index++) {
        if (entries[index].boundingClientRect.top <= 0) {
          entry = entries[index];
        } else {
          return sections.indexOf(entry.target);
        }
      }
      return sections.indexOf(entry.target);
    }

    function createIntersectionObserver(marginTop) {
      marginTop = Math.floor(marginTop + 10000);
      let intersectionObserver = new IntersectionObserver(
              (entries, observe) => {
                let scrollHeight = document.documentElement.scrollHeight;
                if (scrollHeight > marginTop) {
                  observe.disconnect();
                  createIntersectionObserver(scrollHeight);
                  return;
                }
                let index = findIndex(entries);
                activateNavByIndex(navItems[index]);
              },
              {
                rootMargin: marginTop + "px 0px -100% 0px",
                threshold: 0,
              }
      );
      sections.forEach((element) => {
        element && intersectionObserver.observe(element);
      });
    }
    createIntersectionObserver(document.documentElement.scrollHeight);
  }

  document.addEventListener("DOMContentLoaded", listennSidebarTOC);
  document.addEventListener("pjax:success", listennSidebarTOC);
</script>

<style>
  .github-badge {
    display:inline-block;
    border-radius:4px;
    text-shadow:none;
    font-size:13px;
    color:#fff;
    line-height:15px;
    background-color:#ABBAC3;
    margin-bottom:5px;
  }
  .github-badge .badge-subject {
    display:inline-block;
    background-color:#4D4D4D;
    padding:4px 4px 4px 6px;
    border-top-left-radius:4px;
    border-bottom-left-radius:4px;
  }
  .github-badge .badge-value {
    display:inline-block;
    padding:4px 6px 4px 4px;
    border-top-right-radius:4px;
    border-bottom-right-radius:4px;
  }
  .github-badge .bg-brightgreen {
    background-color:#4DC820 !important;
  }
  .github-badge .bg-orange {
    background-color:#FFA500 !important;
  }
  .github-badge .bg-yellow {
    background-color:#D8B024 !important;
  }
  .github-badge .bg-blueviolet {
    background-color:#8833D7 !important;
  }
  .github-badge .bg-pink {
    background-color:#F26BAE !important;
  }
  .github-badge .bg-red {
    background-color:#e05d44 !important;
  }
  .github-badge .bg-blue {
    background-color:#007EC6 !important;
  }
  .github-badge .bg-lightgrey {
    background-color:#9F9F9F !important;
  }
  .github-badge .bg-grey, .github-badge .bg-gray {
    background-color:#555 !important;
  }
  .github-badge .bg-lightgrey, .github-badge .bg-lightgray {
    background-color:#9f9f9f !important;
  }
</style>

        </div>
      </div>
      <div class="column col-2 hide-lg">
        <div class="book-post-info">
  
    <div class="book-post-meta">

  <div class="author">

    <!-- Author image -->
    <div class="author-img">
      
        <figure class="avatar avatar-lg">
          <img src="/jack.png" alt="...">
        </figure>
      
    </div>

    <!-- Author title -->
    <div class="author-title">
      <div>JackFeng</div>
      <div>2021-07-14</div>
    </div>
  </div>

  
    <div class="divider"></div>

    <div class="link">
      <a class="category-link" href="/categories/Hive/">Hive</a>

      <a class="tag-none-link" href="/tags/Hive/" rel="tag">Hive</a>
    </div>

  

  <div class="divider"></div>
</div>

  
  <div class="book-tocbot">
</div>
<div class="book-tocbot-menu">
  <a class="book-toc-expand" onclick="expand_toc()">Expand all</a>
  <a onclick="go_top()">Back to top</a>
  <a onclick="go_bottom()">Go to bottom</a>
</div>


<script src="/js/book-toc.js"></script>


</div>

      </div>
    </div>
  </div>

  <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
</div>

<script>(function (w, d, s, id) {
            if (typeof (w.webpushr) !== 'undefined') return; w.webpushr = w.webpushr || function () { (w.webpushr.q = w.webpushr.q || []).push(arguments) }; var js, fjs = d.getElementsByTagName(s)[0]; js = d.createElement(s); js.id = id; js.async = 1; js.src = "https://cdn.webpushr.com/app.min.js";fjs.parentNode.appendChild(js);}(window, document, 'script', 'webpushr-jssdk'));webpushr('setup', { 'key': 'BFx7WHz0rVpOVN8atT9J94hKkLItiL6wLbP5k5sJJtdQyWv9pryOWtscXADG3vfDUZzp89H1H3q34GSQXcr23Gw' });</script></body>
</html>


<script src="/js/book.js"></script>


<link rel="stylesheet" href="/css/prism.css">


<script src="/js/prism.js"></script>




<!--动态线条-->
<!--<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/canvas-nest.min.js"></script>-->

<!--彩带-->
<!--<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/piao.js"></script>-->
